#include "stdlib.h"
#include <stdio.h>
#include <time.h>

int n = 25, m = 25;

void print_labirint(int array[n][m]);
void go(int array[n][m], int x, int y, int indicator);

int main() {
  printf("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É –õ–∞–±–∏—Ä–∏–Ω—Ç \n –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: \n–í–∞—à–∞ –∑–∞–¥–∞—á–∞ - "
     "–ø—Ä–æ–π—Ç–∏ –ª–∞–±–∏—Ä–∏–Ω—Ç, —Å–æ–±–∏—Ä–∞—è –º–æ–Ω–µ—Ç—ã. –í—ã –º–æ–∂–µ—Ç–µ —Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä—è–º–æ, –≤–ø—Ä–∞–≤–æ, –≤–ª–µ–≤–æ –∏ "
     "–Ω–∞–∑–∞–¥ \n–ö–æ–º–∞–Ω–¥—ã: \n2 - —à–∞–≥ –≤–ø–µ—Ä–µ–¥ \n8 - —à–∞–≥ –Ω–∞–∑–∞–¥ \n4 - —à–∞–≥ –≤–ª–µ–≤–æ "
     "\n6 - —à–∞–≥ –ø—Ä–∞–≤–æ \n–£–¥–∞—á–Ω–æ–π –∏–≥—Ä—ã!\n");

  int labirint[25][25] = {
      {2, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2},
      {2, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 2},
      {2, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 4, 1, 1, 1, 0, 1, 1, 0, 2},
      {2, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 2},
      {2, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 2},
      {2, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 2},
      {2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 2},
      {2, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 2},
      {2, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 2},
      {2, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 2},
      {2, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 2},
      {2, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 4, 0, 0, 2},
      {2, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 2},
      {2, 4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2},
      {2, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 2},
      {2, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 2},
      {2, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 4, 0, 1, 1, 1, 1, 2},
      {2, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 2},
      {2, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 2},
      {2, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 2},
      {2, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 2},
      {2, 4, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 2},
      {2, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2},
      {2, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2},
      {2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2}
  };



  print_labirint(labirint);
  int x = 0, y = 1;
  int indicator;
  while (x != n - 1 && y != m) {
    printf("\n");
    printf("–í–∞—à —Ö–æ–¥:");
    scanf("%d", &indicator);
    go(labirint, x, y, indicator);
    if (indicator == 2) {
      if (labirint[x][y] == 1 || labirint[x][y] == 4) {
        x++;
      }
    } else if (indicator == 8) {
      if (labirint[x][y] == 1 || labirint[x][y] == 4) {
        x--;
      }
    } else if (indicator == 6) {
      if (labirint[x][y] == 1 || labirint[x][y] == 4) {
        y++;
      }
    } else if (indicator == 4) {
      if (labirint[x][y] == 1 || labirint[x][y] == 4) {
        y--;
      }
    } else {
      printf("–ù–µ–≤–µ—Ä–Ω—ã–π —Ö–æ–¥");
    }
  }
  printf("\n");
  printf("–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, –≤—ã –ø—Ä–æ—à–ª–∏ –ª–∞–±–∏—Ä–∏–Ω—Ç!");

  return 0;
}

void print_labirint(int array[n][m]) { // –ø–µ—á–∞—Ç—å –ª–∞–±–∏—Ä–∏–Ω—Ç–∞
  for (int i = 0; i < n; i++) {
    printf("\n");
    for (int j = 0; j < m; j++) {
      if (array[i][j] == 2) {
        printf("üü©");
      } else if (array[i][j] == 0) {
        printf("‚õî");
      } else if (array[i][j] == 3) {
        printf("üßç");
      } else if (array[i][j] == 4) {
        printf("ü™ô ");
      }
      else {
        printf("  ");
      }
    }
  }
}

void go(int array[n][m], int x, int y, int indicator) {
  if (indicator == 2) {
    if (array[x + 1][y] == 1 || array[x+1][y] == 4) {
      system("clear");
      array[x + 1][y] = 3;
      array[x][y] = 1;
      print_labirint(array);
      return;
    } else {
      printf("–ù–µ–≤–µ—Ä–Ω—ã–π —Ö–æ–¥");
    }

  } else if (indicator == 8) {
    if (array[x - 1][y] == 1 || array[x-1][y] == 4) {
      system("clear");
      array[x - 1][y] = 3;
      array[x][y] = 1;
      print_labirint(array);
      return;
    } else {
      printf("–ù–µ–≤–µ—Ä–Ω—ã–π —Ö–æ–¥");
    }
  } else if (indicator == 6) {
    if (array[x][y + 1] == 1 || array[x][y + 1] == 4) {
      system("clear");
      array[x][y + 1] = 3;
      array[x][y] = 1;
      print_labirint(array);
      return;
    } else {
      printf("–ù–µ–≤–µ—Ä–Ω—ã–π —Ö–æ–¥");
    }
  } else if (indicator == 4) {
    if (array[x][y - 1] == 1 || array[x][y-1] == 4) {
      system("clear");
      array[x][y - 1] = 3;
      array[x][y] = 1;
      print_labirint(array);
      return;
    }
  }

  else {
    printf("–ù–µ–≤–µ—Ä–Ω—ã–π —Ö–æ–¥");
  }
}
